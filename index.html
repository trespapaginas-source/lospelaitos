            </div>
          </div>
        </div>
      </div>

      <!-- Booking Form -->
      <div class="booking-form" id="booking-form">
        <div class="booking-form-header">
          <div>
            <span id="step-label">Paso 1 de 4</span>
            <h3 class="font-serif" id="step-title">Número de Invitados</h3>
          </div>
          <div class="step-dots">
            <div class="step-dot active" id="dot-1"></div>
            <div class="step-dot" id="dot-2"></div>
            <div class="step-dot" id="dot-3"></div>
            <div class="step-dot" id="dot-4"></div>
          </div>
        </div>
        <div class="booking-form-content">
          <!-- Step 1: Guests -->
          <div class="step-content active" id="step-1">
            <div class="guests-step">
              <div class="guests-controls">
                <button class="guest-btn" id="btn-minus" onclick="changeGuests(-1)">
                  <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/></svg>
                </button>
                <span class="guests-count" id="guests-count">2</span>
                <button class="guest-btn" id="btn-plus" onclick="changeGuests(1)">
                  <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                </button>
              </div>
              <p class="guests-info">Capacidad máxima de la cabaña: <strong>16 personas</strong>.</p>
              <p class="guests-help">Para eventos con más de 16 personas, contáctanos vía <a href="https://wa.me/573001234567" target="_blank">WhatsApp</a>.</p>
            </div>
          </div>

          <!-- Step 2: Calendar -->
          <div class="step-content" id="step-2">
            <div class="calendar-step">
              <p id="calendar-instruction">Selecciona el día de tu visita</p>
              <div class="calendar">
                <div class="calendar-header">
                  <h4 id="calendar-month-year"></h4>
                  <div class="calendar-nav">
                    <button id="btn-prev-month" onclick="changeMonth(-1)">
                      <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                    </button>
                    <button onclick="changeMonth(1)">
                      <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                    </button>
                  </div>
                </div>
                <div class="calendar-weekdays">
                  <span>Do</span><span>Lu</span><span>Ma</span><span>Mi</span><span>Ju</span><span>Vi</span><span>Sá</span>
                </div>
                <div class="calendar-days" id="calendar-days"></div>
              </div>
              <div class="date-summary" id="date-summary">
                <div class="date-summary-row">
                  <div class="date-summary-col">
                    <label id="start-label">Fecha</label>
                    <span id="start-date">—</span>
                  </div>
                  <span class="date-summary-arrow" id="date-arrow" style="display:none;">→</span>
                  <div class="date-summary-col" id="end-col" style="display:none;">
                    <label>Salida</label>
                    <span id="end-date">—</span>
                  </div>
                </div>
                <div class="date-summary-total" id="nights-total" style="display:none;"></div>
              </div>
            </div>
          </div>

          <!-- Step 3: Contact -->
          <div class="step-content" id="step-3">
            <div class="contact-step">
              <div class="form-row">
                <div class="form-group">
                  <label>Nombre *</label>
                  <input type="text" id="input-firstname" placeholder="Tu nombre">
                  <div class="form-error" id="error-firstname"></div>
                </div>
                <div class="form-group">
                  <label>Apellido *</label>
                  <input type="text" id="input-lastname" placeholder="Tu apellido">
                  <div class="form-error" id="error-lastname"></div>
                </div>
              </div>
              <div class="form-group">
                <label>Celular (WhatsApp) *</label>
                <div class="phone-input">
                  <span class="phone-prefix">+57</span>
                  <input type="tel" id="input-phone" placeholder="3001234567" maxlength="10">
                </div>
                <div class="form-error" id="error-phone"></div>
              </div>
              <div class="form-group">
                <label>Correo electrónico (opcional)</label>
                <input type="email" id="input-email" placeholder="tu@email.com">
                <div class="form-error" id="error-email"></div>
              </div>
              <div class="form-group">
                <label>Fecha de cumpleaños (opcional)</label>
                <div class="birthday-row">
                  <select id="select-day"><option value="">Día</option></select>
                  <select id="select-month"><option value="">Mes</option></select>
                  <select id="select-year"><option value="">Año</option></select>
                </div>
              </div>
            </div>
          </div>

          <!-- Step 4: Confirmation -->
          <div class="step-content" id="step-4">
            <div class="confirm-step">
              <div class="confirm-summary">
                <h4>Resumen de tu reserva</h4>
                <div class="confirm-row"><span class="label">Tipo</span><span class="value" id="confirm-type"></span></div>
                <div class="confirm-row"><span class="label">Personas</span><span class="value" id="confirm-guests"></span></div>
                <div class="confirm-row"><span class="label" id="confirm-dates-label">Fecha</span><span class="value" id="confirm-dates"></span></div>
                <div class="confirm-row" id="confirm-nights-row" style="display:none;"><span class="label">Noches</span><span class="value" id="confirm-nights"></span></div>
                <div class="confirm-row"><span class="label">Contacto</span><span class="value" id="confirm-contact"></span></div>
                <div class="confirm-total"><span class="label">Total estimado</span><span class="value" id="confirm-total"></span></div>
              </div>
              <div class="checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="check-policies">
                  <span class="checkbox-box"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></span>
                  <span>Acepto las <a href="https://ejemplo.com/politicas-cancelacion" target="_blank">políticas de cancelación</a> y <a href="https://ejemplo.com/terminos-uso" target="_blank">términos de uso</a></span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="check-contact">
                  <span class="checkbox-box"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></span>
                  <span>Acepto ser contactado por WhatsApp o llamada telefónica para confirmar la reserva</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Success -->
          <div class="step-content" id="step-success">
            <div class="success-step">
              <div class="success-icon">
                <svg class="icon-lg" fill="none" stroke="#6ee7b7" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3l14 9-14 9V3z"/></svg>
              </div>
              <h3 class="font-serif">¡Pre-reserva Exitosa!</h3>
              <p>Hemos recibido tu solicitud para Cabaña Los Pelaitos. Nos comunicaremos contigo en las próximas 24 horas para confirmar tu reserva.</p>
              <button class="btn-nueva-reserva" onclick="resetBooking()">Nueva Reserva</button>
            </div>
          </div>
        </div>
        <div class="booking-nav" id="booking-nav">
          <button class="btn-back" id="btn-back" onclick="prevStep()">
            <svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/></svg>
            Atrás
          </button>
          <button class="btn-next" id="btn-next" onclick="nextStep()">
            Continuar
            <svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
          </button>
        </div>
      </div>

      <p class="no-plan-msg" id="no-plan-msg">Selecciona un plan para comenzar tu reserva</p>
    </div>
  </section>

  <!-- UBICACION -->
  <section class="ubicacion-section" id="ubicacion">
    <div class="ubicacion-inner">
      <div class="ubicacion-map">
        <div class="ubicacion-map-container">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d31351.49479389279!2d-74.76451559999999!3d10.809461!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8ef42d63e9e1c3b1%3A0xe5f8e5b5e5e5e5e5!2sSabanagrande%2C%20Atl%C3%A1ntico!5e0!3m2!1ses!2sco!4v1620000000000!5m2!1ses!2sco" allowfullscreen loading="lazy"></iframe>
          <div class="ubicacion-map-pin">
            <svg class="icon-md" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
          </div>
        </div>
      </div>
      <div class="ubicacion-text">
        <span>Ubicación Privilegiada</span>
        <h2 class="font-serif">Fácil de llegar,<br>difícil de olvidar</h2>
        <p>Estamos ubicados en Sabanagrande, Atlántico, a solo 15 minutos del aeropuerto y con vías de acceso pavimentadas hasta la entrada.</p>
        <a href="https://maps.app.goo.gl/N959x7dAkn9LVDTq5" target="_blank" class="btn-como-llegar">
          <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/></svg>
          Cómo llegar
        </a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="footer-inner">
      <div class="footer-brand">
        <h4 class="font-serif">Cabaña Los Pelaitos</h4>
        <p>Un refugio exclusivo diseñado para desconectar de la rutina y reconectar con lo esencial. Sabanagrande, Atlántico.</p>
      </div>
      <div class="footer-links">
        <h4>Explorar</h4>
        <ul>
          <li><button onclick="scrollToSection('experiencia')">La Cabaña</button></li>
          <li><button onclick="scrollToSection('experiencia')">Galería</button></li>
          <li><button onclick="scrollToSection('comodidades')">Servicios</button></li>
          <li><button onclick="scrollToSection('ubicacion')">Ubicación</button></li>
        </ul>
      </div>
      <div class="footer-links">
        <h4>Social</h4>
        <div class="footer-social">
          <a href="https://instagram.com/cabanalospelaitos" target="_blank">
            <svg class="icon" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
          </a>
          <a href="https://facebook.com/cabanalospelaitos" target="_blank">
            <svg class="icon" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
          </a>
          <a href="https://wa.me/573001234567" target="_blank">
            <svg class="icon" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
          </a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>© 2025 Cabaña Los Pelaitos.</p>
      <p>Diseño y Desarrollo Exclusivo</p>
    </div>
  </footer>

  <script>
    // === STATE ===
    let bookingType = null;
    let currentStep = 1;
    let guests = 2;
    let startDate = null;
    let endDate = null;
    let currentMonth = new Date();
    const PRICE_PASS = 50000;
    const PRICE_STAY = 70000;
    const MIN_GUESTS = 1;
    const MAX_GUESTS = 16;
    const monthNames = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];
    const today = new Date(); today.setHours(0,0,0,0);
    let currentSlide = 0;
    let slideInterval;

    // === NAV SCROLL ===
    window.addEventListener('scroll', function() {
      const nav = document.getElementById('navbar');
      const logo = document.getElementById('logo');
      const links = document.getElementById('nav-links');
      const btn = document.getElementById('mobile-menu-btn');
      if (window.scrollY > 50) {
        nav.classList.add('scrolled');
        document.getElementById('logo-roof').setAttribute('stroke', '#022c22');
        document.getElementById('logo-roof-fill').setAttribute('fill', '#022c22');
        document.getElementById('logo-door').setAttribute('fill', '#fafaf9');
        document.getElementById('logo-text').setAttribute('fill', '#022c22');
        document.getElementById('logo-subtext').setAttribute('fill', '#065f46');
        links.querySelectorAll('button').forEach(b => { b.style.color = '#292524'; });
        btn.style.color = '#1c1917';
      } else {
        nav.classList.remove('scrolled');
        document.getElementById('logo-roof').setAttribute('stroke', 'white');
        document.getElementById('logo-roof-fill').setAttribute('fill', 'white');
        document.getElementById('logo-door').setAttribute('fill', '#022c22');
        document.getElementById('logo-text').setAttribute('fill', 'white');
        document.getElementById('logo-subtext').setAttribute('fill', '#d1fae5');
        links.querySelectorAll('button').forEach(b => { b.style.color = 'white'; });
        btn.style.color = 'white';
      }
    });

    function scrollToTop(e) { e.preventDefault(); window.scrollTo({top:0,behavior:'smooth'}); }
    function scrollToSection(id) { document.getElementById(id).scrollIntoView({behavior:'smooth'}); }
    function openMobileMenu() { document.getElementById('mobile-menu').classList.add('open'); }
    function closeMobileMenu() { document.getElementById('mobile-menu').classList.remove('open'); }

    // === GALLERY ===
    function goToSlide(index) {
      currentSlide = index;
      document.querySelectorAll('.gallery-slide').forEach((s,i) => s.classList.toggle('active', i===index));
      document.querySelectorAll('.gallery-dot').forEach((d,i) => d.classList.toggle('active', i===index));
    }
    function startGallery() {
      slideInterval = setInterval(() => { goToSlide((currentSlide+1)%4); }, 5000);
    }
    startGallery();

    // === AMENITIES ===
    function toggleAmenities() {
      const el = document.getElementById('extra-amenities');
      const btn = document.getElementById('btn-ver-mas');
      el.classList.toggle('show');
      btn.textContent = el.classList.contains('show') ? 'Ver menos' : 'Ver lista completa';
    }

    // === BOOKING ===
    function selectPlan(type) {
      bookingType = type;
      document.getElementById('card-pass').classList.toggle('selected', type==='pass');
      document.getElementById('card-stay').classList.toggle('selected', type==='stay');
      document.getElementById('booking-form').classList.add('show');
      document.getElementById('no-plan-msg').style.display = 'none';
      currentStep = 1;
      startDate = null;
      endDate = null;
      updateStepUI();
      renderCalendar();
      document.getElementById('calendar-instruction').textContent = type==='pass' ? 'Selecciona el día de tu visita' : 'Selecciona fecha de llegada y salida';
      setTimeout(() => { document.getElementById('booking-form').scrollIntoView({behavior:'smooth',block:'start'}); }, 100);
    }

    function changeGuests(delta) {
      const newVal = guests + delta;
      if (newVal >= MIN_GUESTS && newVal <= MAX_GUESTS) {
        guests = newVal;
        document.getElementById('guests-count').textContent = guests;
      }
      document.getElementById('btn-minus').disabled = guests <= MIN_GUESTS;
      document.getElementById('btn-plus').disabled = guests >= MAX_GUESTS;
    }

    function updateStepUI() {
      const titles = ['','Número de Invitados','Selecciona tu Fecha','Tus Datos de Contacto','Confirmar Reserva'];
      document.getElementById('step-label').textContent = 'Paso ' + currentStep + ' de 4';
      document.getElementById('step-title').textContent = titles[currentStep];
      for (let i=1; i<=4; i++) {
        document.getElementById('step-'+i).classList.toggle('active', i===currentStep);
        const dot = document.getElementById('dot-'+i);
        dot.classList.remove('active','completed');
        if (i===currentStep) dot.classList.add('active');
        else if (i<currentStep) dot.classList.add('completed');
      }
      document.getElementById('step-success').classList.remove('active');
      document.getElementById('btn-back').classList.toggle('show', currentStep>1);
      document.getElementById('booking-nav').style.display = 'flex';
      if (currentStep===4) {
        document.getElementById('btn-next').innerHTML = 'Solicitar Pre-reserva';
        updateConfirmation();
      } else {
        document.getElementById('btn-next').innerHTML = 'Continuar <svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>';
      }
      updateNextBtn();
    }

    function updateNextBtn() {
      let canProceed = true;
      if (currentStep===2) {
        canProceed = bookingType==='pass' ? startDate!==null : (startDate!==null && endDate!==null);
      } else if (currentStep===4) {
        canProceed = document.getElementById('check-policies').checked && document.getElementById('check-contact').checked;
      }
      document.getElementById('btn-next').disabled = !canProceed;
    }

    function nextStep() {
      if (currentStep===3 && !validateForm()) return;
      if (currentStep===4) { submitBooking(); return; }
      currentStep++;
      updateStepUI();
    }

    function prevStep() {
      if (currentStep>1) { currentStep--; updateStepUI(); }
    }

    function validateForm() {
      let valid = true;
      const fn = document.getElementById('input-firstname').value.trim();
      const ln = document.getElementById('input-lastname').value.trim();
      const ph = document.getElementById('input-phone').value.trim();
      const em = document.getElementById('input-email').value.trim();
      document.querySelectorAll('.form-error').forEach(e => e.textContent = '');
      document.querySelectorAll('.contact-step input').forEach(i => i.classList.remove('error'));
      if (fn.length < 2) { document.getElementById('error-firstname').textContent = 'Mínimo 2 caracteres'; document.getElementById('input-firstname').classList.add('error'); valid = false; }
      if (ln.length < 2) { document.getElementById('error-lastname').textContent = 'Mínimo 2 caracteres'; document.getElementById('input-lastname').classList.add('error'); valid = false; }
      if (ph.length !== 10) { document.getElementById('error-phone').textContent = 'Debe tener exactamente 10 dígitos'; document.getElementById('input-phone').classList.add('error'); valid = false; }
      if (em && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(em)) { document.getElementById('error-email').textContent = 'Formato de correo inválido'; document.getElementById('input-email').classList.add('error'); valid = false; }
      return valid;
    }

    function updateConfirmation() {
      document.getElementById('confirm-type').textContent = bookingType==='pass' ? 'Pasadía' : 'Estadía Completa';
      document.getElementById('confirm-guests').textContent = guests;
      document.getElementById('confirm-dates-label').textContent = bookingType==='pass' ? 'Fecha' : 'Fechas';
      let dateStr = startDate ? formatDate(startDate) : '—';
      if (endDate) dateStr += ' - ' + formatDate(endDate);
      document.getElementById('confirm-dates').textContent = dateStr;
      if (bookingType==='stay' && endDate) {
        document.getElementById('confirm-nights-row').style.display = 'flex';
        document.getElementById('confirm-nights').textContent = calculateNights();
      } else {
        document.getElementById('confirm-nights-row').style.display = 'none';
      }
      const fn = document.getElementById('input-firstname').value.trim();
      const ln = document.getElementById('input-lastname').value.trim();
      document.getElementById('confirm-contact').textContent = fn + ' ' + ln;
      document.getElementById('confirm-total').textContent = formatCurrency(calculateTotal());
    }

    function submitBooking() {
      document.getElementById('btn-next').innerHTML = '<svg class="icon-sm animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg> Procesando...';
      document.getElementById('btn-next').disabled = true;
      setTimeout(() => {
        for (let i=1; i<=4; i++) document.getElementById('step-'+i).classList.remove('active');
        document.getElementById('step-success').classList.add('active');
        document.getElementById('booking-nav').style.display = 'none';
        for (let i=1; i<=4; i++) { document.getElementById('dot-'+i).classList.remove('active'); document.getElementById('dot-'+i).classList.add('completed'); }
      }, 2000);
    }

    function resetBooking() {
      bookingType = null;
      currentStep = 1;
      guests = 2;
      startDate = null;
      endDate = null;
      document.getElementById('guests-count').textContent = '2';
      document.getElementById('input-firstname').value = '';
      document.getElementById('input-lastname').value = '';
      document.getElementById('input-phone').value = '';
      document.getElementById('input-email').value = '';
      document.getElementById('check-policies').checked = false;
      document.getElementById('check-contact').checked = false;
      document.getElementById('card-pass').classList.remove('selected');
      document.getElementById('card-stay').classList.remove('selected');
      document.getElementById('booking-form').classList.remove('show');
      document.getElementById('no-plan-msg').style.display = 'block';
      document.getElementById('step-success').classList.remove('active');
      scrollToSection('reservar');
    }

    // === CALENDAR ===
    function renderCalendar() {
      const year = currentMonth.getFullYear();
      const month = currentMonth.getMonth();
      document.getElementById('calendar-month-year').textContent = monthNames[month] + ' ' + year;
      const isCurrentMonth = year===today.getFullYear() && month===today.getMonth();
      document.getElementById('btn-prev-month').disabled = isCurrentMonth;
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month+1, 0).getDate();
      let html = '';
      for (let i=0; i<firstDay; i++) html += '<button class="calendar-day" disabled></button>';
      for (let d=1; d<=daysInMonth; d++) {
        const date = new Date(year, month, d);
        const isPast = date < today;
        const isStart = startDate && date.getTime()===startDate.getTime();
        const isEnd = endDate && date.getTime()===endDate.getTime();
        const inRange = startDate && endDate && date>startDate && date<endDate;
        let cls = 'calendar-day';
        if (isStart || isEnd) cls += ' selected';
        else if (inRange) cls += ' in-range';
        html += '<button class="'+cls+'" '+(isPast?'disabled':'')+' onclick="selectDate('+year+','+month+','+d+')">'+d+'</button>';
      }
      document.getElementById('calendar-days').innerHTML = html;
      updateDateSummary();
    }

    function changeMonth(delta) {
      currentMonth.setMonth(currentMonth.getMonth()+delta);
      renderCalendar();
    }

    function selectDate(year, month, day) {
      const date = new Date(year, month, day);
      if (bookingType==='pass') { startDate = date; endDate = null; }
      else {
        if (!startDate || (startDate && endDate) || date<startDate) { startDate = date; endDate = null; }
        else { endDate = date; }
      }
      renderCalendar();
      updateNextBtn();
    }

    function updateDateSummary() {
      const summary = document.getElementById('date-summary');
      if (startDate) {
        summary.classList.add('show');
        document.getElementById('start-date').textContent = formatDate(startDate);
        if (bookingType==='stay') {
          document.getElementById('start-label').textContent = 'Llegada';
          document.getElementById('date-arrow').style.display = 'inline';
          document.getElementById('end-col').style.display = 'block';
          document.getElementById('end-date').textContent = endDate ? formatDate(endDate) : '—';
          if (endDate) {
            document.getElementById('nights-total').style.display = 'block';
            document.getElementById('nights-total').textContent = calculateNights()+' noche'+(calculateNights()>1?'s':'')+' • '+formatCurrency(calculateTotal());
          } else {
            document.getElementById('nights-total').style.display = 'none';
          }
        } else {
          document.getElementById('start-label').textContent = 'Fecha';
          document.getElementById('date-arrow').style.display = 'none';
          document.getElementById('end-col').style.display = 'none';
          document.getElementById('nights-total').style.display = 'none';
        }
      } else {
        summary.classList.remove('show');
      }
    }

    function formatDate(date) {
      const days = ['dom','lun','mar','mié','jue','vie','sáb'];
      const months = ['ene','feb','mar','abr','may','jun','jul','ago','sep','oct','nov','dic'];
      return days[date.getDay()]+', '+date.getDate()+' '+months[date.getMonth()];
    }

    function formatCurrency(amount) {
      return '$' + amount.toLocaleString('es-CO') + ' COP';
    }

    function calculateNights() {
      if (!startDate || !endDate) return 0;
      return Math.ceil((endDate-startDate)/(1000*60*60*24));
    }

    function calculateTotal() {
      if (bookingType==='pass') return PRICE_PASS * guests;
      return PRICE_STAY * guests * calculateNights();
    }

    // === FORM EVENTS ===
    document.getElementById('input-phone').addEventListener('input', function(e) {
      this.value = this.value.replace(/\D/g, '').slice(0,10);
    });
    document.getElementById('check-policies').addEventListener('change', updateNextBtn);
    document.getElementById('check-contact').addEventListener('change', updateNextBtn);

    // === INIT ===
    (function init() {
      changeGuests(0);
      renderCalendar();
      // Populate birthday selects
      const daySelect = document.getElementById('select-day');
      for (let i=1; i<=31; i++) daySelect.innerHTML += '<option value="'+i+'">'+i+'</option>';
      const monthSelect = document.getElementById('select-month');
      monthNames.forEach((m,i) => monthSelect.innerHTML += '<option value="'+(i+1)+'">'+m.slice(0,3)+'</option>');
      const yearSelect = document.getElementById('select-year');
      const currentYear = new Date().getFullYear();
      for (let i=0; i<80; i++) yearSelect.innerHTML += '<option value="'+(currentYear-i-10)+'">'+(currentYear-i-10)+'</option>';
    })();
  </script>
</body>
</html>
